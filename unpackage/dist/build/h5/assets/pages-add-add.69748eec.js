import{r as e,o as a,c as l,w as t,d as u,e as s,k as o,D as d,p as i,q as n,I as m,u as r,j as p,v as c,x as f}from"./index-c0cc7daa.js";import{_ as v}from"./uni-file-picker.92e111f2.js";import{_,r as V}from"./uni-app.es.6c29e105.js";const h=_({__name:"add",setup(_){const h=e({title:"",author:"",content:""}),y=e([]),x=e([]),b=e=>{x.value=e.tempFilePaths},j=e=>{let a=e.detail.value;const l=x.value;d.callFunction({name:"pushDataToDB",data:{detail:a,picArrs:l}}).then((e=>{setTimeout((()=>{i({url:"/pages/index/index"})}),500),n({title:"发布成功"})}))};return(e,d)=>{const i=m,n=u,_=r,x=V(p("uni-file-picker"),v),k=c,F=f;return a(),l(n,{class:"add"},{default:t((()=>[s(F,{onSubmit:j},{default:t((()=>[s(n,{class:"item"},{default:t((()=>[s(i,{type:"text",modelValue:h.value.title,"onUpdate:modelValue":d[0]||(d[0]=e=>h.value.title=e),name:"title",placeholder:"请输入标题"},null,8,["modelValue"])])),_:1}),s(n,{class:"item"},{default:t((()=>[s(i,{type:"text",modelValue:h.value.author,"onUpdate:modelValue":d[1]||(d[1]=e=>h.value.author=e),name:"author",placeholder:"请输入作者"},null,8,["modelValue"])])),_:1}),s(n,{class:"item"},{default:t((()=>[s(_,{name:"content",modelValue:h.value.content,"onUpdate:modelValue":d[2]||(d[2]=e=>h.value.content=e),placeholder:"请输入详细内容"},null,8,["modelValue"])])),_:1}),s(n,{class:"item"},{default:t((()=>[s(x,{modelValue:y.value,"onUpdate:modelValue":d[3]||(d[3]=e=>y.value=e),fileMediatype:"image",mode:"grid",onSuccess:b,onFail:e.fail},null,8,["modelValue","onFail"])])),_:1}),s(n,{class:"item"},{default:t((()=>{return[s(k,{"form-type":"reset"},{default:t((()=>[o("重置")])),_:1}),s(k,{"form-type":"submit",type:"primary",disabled:(e=h.value,Object.keys(e).some(((a,l)=>""==e[a])))},{default:t((()=>[o(" 提交 ")])),_:1},8,["disabled"])];var e})),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-b5030762"]]);export{h as default};
